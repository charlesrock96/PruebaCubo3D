@using Matriz3D.Models.DTO;

@{
    ViewBag.Title = "Home Page";
}

<link href="~/Scripts/bootstrap-sweetalert/sweetalert.css" rel="stylesheet" />

<div id="contenedor">
    <div class="jumbotron">
        <h2>Paso 1</h2>
        <p>Casos de Prueba [T]</p>
        <input type="number" id="t" class="form-control" step="1" min="1" max="50"/>
        <br />
        <button onclick="validar()" class="btn btn-default">Siguiente &raquo;</button>
    </div>

    @{
        if (Session["msg"] != null)
        {
            var it = (Mensaje)(Session["msg"]);
            <input type="hidden" id="msg" value="@it.msg" />
            <input type="hidden" id="tipo" value="@it.code" />
        }

        Session["msg"] = null; }

    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/bootstrap")
    <script src="~/Scripts/bootstrap-sweetalert/sweetalert.min.js"></script>
    <script src="~/Scripts/principal.js"></script>
</div>

<script>
    $(document).ready(function () {
        msg();
    });

    function validar() {
        var t = parseInt($("#t").val());
    
        if ($("#t").val() == '' || $("#t") === undefined || t < 1 || t > 5000) {
            swal({
                title: "Error!",
                text: "El valor de T no es valido.",
                type: "error",
                confirmButtonClass: "btn-error",
                confirmButtonText: "Aceptar"
            });

            $("#t").focus();
        } else {
            paso2();
        }

    }

    function paso2() {
        var t = $("#t").val();

        $.post("@Url.Action("Paso2")", { t: t }).done(function (data) {

            $("#contenedor").html(data);

        }).fail(function (xhr, textStatus, errorThrown) {
            $("#contenedor").html(xhr.responseText);
        });
    }
</script>
